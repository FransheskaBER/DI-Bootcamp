<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coloring Game</title>
    <link rel="stylesheet" href="coloring.css">
</head>
<body>

    <div class="main-container">
        <div class="left">
            <button id="clearBoard">Clear</button>
            <div class="palette">
                <div class="color" style="background: red"></div>
                <div class="color" style="background: lightcoral"></div>
                <div class="color" style="background: orange"></div>
                <div class="color" style="background: yellow"></div>
                <div class="color" style="background: green"></div>
                <div class="color" style="background: lightblue"></div>
                <div class="color" style="background: blue"></div>
                <div class="color" style="background: plum"></div>
                <div class="color" style="background: purple"></div>
                <div class="color" style="background: palevioletred"></div>
                <div class="color" style="background: pink"></div>
                <div class="color" style="background: burlywood"></div>
                <div class="color" style="background: lightgreen"></div>
                <div class="color" style="background: lightseagreen"></div>
                <div class="color" style="background: lightgrey"></div>
                <div class="color" style="background: lightslategray"></div>
                <div class="color" style="background: gray"></div>
                <div class="color" style="background: black"></div>
                <div class="color" style="background: white"></div>
                <div class="color" style="background: lightcyan"></div>
                <div class="color" style="background: goldenrod"></div>
            </div>
        </div>

        <div class="board"></div>
    </div>
    
    <script src="coloring.js">
    
    const board = document.querySelector(".board");

    const totalCells = 2952;
    for (let i=0; i<totalCells; i++){
        const cell = document.createElement("div");
        cell.classList.add("cell");
        board.appendChild(cell);
    };

    const palette = document.querySelector(".palette");
    const clearBtn = document.querySelector("#clearBoard");

    let currentColor = null;
    let isPainting = false;

    // Choose a color event
    palette.addEventListener("click", (e) => {
        const selectedColor = e.target
        if (!selectedColor.classList.contains("color")) return; // ignore if the selected is not color
        
        currentColor = getComputedStyle(selectedColor).background;
        console.log(currentColor);
    });

    // is it a cell?
    function paintIfCell(e){
        if (!e.classList || !e.classList.contains("cell")){ // does this have a class list or have a class that contains cell?
            return; //do nothing no paint
        }
        if (!currentColor) { // if user hasnt picked a color yet
            return; //do nothing
        }
        e.style.background = currentColor // apply the chosen color to this cell
    }

    // Start paiting
    board.addEventListener("mousedown", (e) => {
        isPainting = true;
        e.preventDefault(); // prevent text selection
        paintIfCell(e.target);
    });

    // Continue painting while draggin
    board.addEventListener("mouseover", (e) => {
        if (!isPainting) return; // if the ispainting is not true, stop and do nothign
        paintIfCell(e.target);
    });

    // stop painting
    window.addEventListener("mouseup", () => { //mouse btn release anywhere on the page
        isPainting = false;
    });

    // clear board
    clearBtn.addEventListener("click", () => {
        const cells = document.querySelectorAll(".cell");
        cells.forEach(cell => {
            cell.style.background = "white";
        });
    });
    
    </script>
</body>
</html>